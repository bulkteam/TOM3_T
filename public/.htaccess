# TOM3 - Apache Rewrite Rules
# Sichere & robuste Version - weniger fragil, klarere Regeln

RewriteEngine On
RewriteBase /TOM3/public/

# Block direct access to /api/*.php except index.php (inkl. path-info)
RewriteRule ^api/(?!index\.php$).+\.php(?:/.*)?$ - [F,L,NC]

# Route ALL /api/* to router
RewriteRule ^api/(.*)$ api/index.php [QSA,L]

# SPA fallback
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.html [QSA,L]


